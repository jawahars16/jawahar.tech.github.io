<!DOCTYPE html>
<html lang=" en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>GCP Load Balancing - Clearing the mist | Jawahar Selvaraj</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="GCP Load Balancing - Clearing the mist" />
<meta name="author" content="Jawahar Selvaraj" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="GCP Load balancers are the most interesting topic when you start learning Google Cloud Platform. There are different types of load balancers available and understanding them would help us to decide the right load balancer for the right purpose." />
<meta property="og:description" content="GCP Load balancers are the most interesting topic when you start learning Google Cloud Platform. There are different types of load balancers available and understanding them would help us to decide the right load balancer for the right purpose." />
<link rel="canonical" href="https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist" />
<meta property="og:url" content="https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist" />
<meta property="og:site_name" content="Jawahar Selvaraj" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-29T22:12:03+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="GCP Load Balancing - Clearing the mist" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jawahar Selvaraj"},"dateModified":"2020-06-29T22:12:03+00:00","datePublished":"2020-06-29T22:12:03+00:00","description":"GCP Load balancers are the most interesting topic when you start learning Google Cloud Platform. There are different types of load balancers available and understanding them would help us to decide the right load balancer for the right purpose.","headline":"GCP Load Balancing - Clearing the mist","mainEntityOfPage":{"@type":"WebPage","@id":"https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist"},"url":"https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jawahar.tech/feed.xml" title="Jawahar Selvaraj" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Jawahar Selvaraj</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/bytes/">Bytes</a><a class="page-link" href="/blog/">Blog</a><a class="page-link" href="/videos/">Videos</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
    <div class="wrapper">
      <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">GCP Load Balancing - Clearing the mist</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-06-29T22:12:03+00:00" itemprop="datePublished">
        Jun 29, 2020
      </time></p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/featured_image.jpg" /></header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>GCP Load balancers are the most interesting topic when you start learning Google Cloud Platform. There are different types of load balancers available and understanding them would help us to decide the right load balancer for the right purpose. These load balancer types are derived from several criteria. In this article, I am going to talk about those different criteria that make up the load balancer types.</p>

<p>Load Balancers are basically a system that distributes the network traffic to different instances to avoid overburdening the system. Though that is the primary function of a load balancer, it also acts as a CDN, network proxy, and a shield. The following are the different criteria that GCP uses to classify the load balancing options.</p>

<ol>
  <li>Global or Regional</li>
  <li>External or Internal</li>
  <li>Traffic types (TCP or UDP)</li>
  <li>Proxy-based or Pass-through</li>
</ol>

<h2 id="global-or-regional">Global or Regional</h2>
<p>A global load balancer (LB) helps to distribute the network traffic to virtual machines that are spread across different regions, whereas a regional LB distributes the network traffic to virtual machines within a single region.</p>

<p>Consider you’re building an application that needs a global presence - like a marketing website. It gets visitors from all over the world, so we basically distribute virtual machines all over the world to avoid latency. The global load balancer is the right choice here - it helps to route your traffic to the nearby server.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/global-lb.png" alt="Global Load Balancer" title="Global Load Balancer" /></p>

<p>On the other side, a regional load balancer would be useful if you prefer to restrict the servers in a single region. For example, you started a restaurant and you are looking for an online presence to support home delivery. In this case, you prefer to create servers in the same region where your restaurant is. To improve performance, you might want to create more servers in that region and you can also spread it across different zones to avoid zonal failures. In this case, a regional load balancer is a right choice, which distributes the network across virtual machines in the same region.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/regional-lb.png" alt="Regional Load Balancer" title="Regional Load Balancer" /></p>

<h2 id="external-or-internal">External or Internal</h2>
<p>An external load balancer drives traffic from the public internet into your GCP network, whereas an internal load balancer drives traffic within your GCP network. The example we just discussed above (marketing website or a restaurant home delivery portal) are very good examples of external load balancers.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/external-lb.png" alt="External Load Balancer" title="External Load Balancer" /></p>

<p>Consider you have a 3-tier architecture (UI, Service, and Database) and you want to improve the performance and use the resources efficiently. A load balancer can be introduced in between these tiers and drives the traffic across the servers.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/internal-lb.png" alt="Internal Load Balancer" title="Internal Load Balancer" /></p>

<h3 id="traffic-types">Traffic types</h3>
<p>GCP load balancer supports different types of network traffic as listed below.</p>

<ul>
  <li>HTTP</li>
  <li>HTTPS</li>
  <li>TCP without SSL</li>
  <li>TCP with SSL</li>
  <li>UDP</li>
</ul>

<p>In the GCP Console, you have two different options to configure HTTP(S) based LB and TCP based LB. HTTP(S) based is layer 7 LB, whereas TCP based is layer 4 LB. SSL certificates can be configured to make a TCP LB secure. Several other features like Cloud CDN, Cloud Armor, and advanced redirect/rewrite rules are available only to HTTP(S) based LB.</p>

<h3 id="points-to-remember">Points to remember</h3>

<ul>
  <li>External HTTP(S) LBs are always global.</li>
  <li>Internal LBs are always regional, no matter what traffic type it is.</li>
  <li>UDP LBs are always regional.</li>
</ul>

<h2 id="proxy-based-or-pass-through">Proxy-based or Pass-through</h2>
<p>A GCP load balancer can be proxy-based, in which a network request ends at the load balancer and a new request will be created to reach the backend service. In this case, SSL termination happens at the load balancer and the new request to backend service may not be encrypted. Also, the backend instances will not get the client IP details, so the firewall rules need to be carefully configured.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/proxy-lb.png" alt="Proxy Load Balancer" title="Proxy Load Balancer" /></p>

<p>On the other case, a typical pass-through LB just forwards the network requests instead of proxying it. In this case, the SSL termination happens at the backend instance.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/pass-through-lb.png" alt="Pass-through Load Balancer" title="Pass-through Load Balancer" /></p>

<h3 id="points-to-remember-1">Points to remember</h3>

<ul>
  <li>HTTP(S) LB is always proxy-based.</li>
  <li>TCP/SSL global LBs are always proxy-based, whereas TCP/SSL regional is always pass-through.</li>
  <li>UDP is always pass-through.</li>
</ul>

<p>Based on the above criteria, the GCP console provides three different ways to configure the load balancer. The following are the different configurations and their characteristics.</p>

<p><img src="/assets/blog/2020-06-29-gcp-load-balancing-clearing-the-mist/gcp-options.png" alt="GCP Load balancing options" title="GCP Load balancing options" /></p>

<h3 id="https-load-balancer">HTTP(S) Load Balancer</h3>

<ul>
  <li>It could be either external or internal.</li>
  <li>By default, external is global, and internal is regional.</li>
  <li>External LB supports IPv6, whereas internal doesn’t.</li>
  <li>Always proxy-based.</li>
  <li>External LB supports Cloud CDN.</li>
  <li>Layer 7 load balancer.</li>
</ul>

<h3 id="tcpssl-load-balancer">TCP/SSL Load Balancer</h3>

<ul>
  <li>It could be either external or internal.</li>
  <li>External LB could be either global or regional, whereas internal is always regional.</li>
  <li>External with global LB supports IPv6, whereas internal doesn’t.</li>
  <li>Global is proxy-based, whereas regional is pass-through.</li>
  <li>Layer 4 load balancer.</li>
</ul>

<h3 id="udp-load-balancer">UDP Load balancer</h3>

<ul>
  <li>It could be either external or internal.</li>
  <li>Always regional.</li>
  <li>Layer 4 load balancer.</li>
  <li>Always pass-through.</li>
</ul>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist';
      this.page.identifier = 'https://jawahar.tech/blog/2020-06-29-gcp-load-balancing-clearing-the-mist';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://jawahar-tech.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/blog/2020-06-29-gcp-load-balancing-clearing-the-mist" hidden></a>
</article>
    </div>
  </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://jawahar.tech/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          jawahar.tech © All rights reserved.
          <!-- <li class="p-name">Jawahar Selvaraj</li> -->
          
        </ul>
      </div>
      <div class="footer-col">
        <p>I am a Software Engineer passionate in Cloud engineering and Golang programming. I use this website to share my learnings.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://www.linkedin.com/in/jawaharselvaraj" target="_blank" title="linkedin">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.youtube.com/@jawahar.nutshell" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://www.instagram.com/@jawahar.tech" target="_blank" title="instagram">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#instagram"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://github.com/jawahars16" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://twitter.com/jawahars_16" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="https://stackoverflow.com/users/1693776/jawahar" target="_blank" title="stackoverflow">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#stackoverflow"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
<style>
    #cookie-notice {
        padding: 0.5rem 1rem;
        display: none;
        text-align: center;
        position: fixed;
        bottom: 0;
        width: calc(100% - 2rem);
        background: #222;
        color: rgba(255, 255, 255, 0.8);
    }

    #cookie-notice a {
        display: inline-block;
        cursor: pointer;
        margin-left: 0.5rem;
    }

    @media (max-width: 767px) {
        #cookie-notice span {
            display: block;
            padding-top: 3px;
            margin-bottom: 1rem;
        }

        #cookie-notice a {
            position: relative;
            bottom: 4px;
        }
    }
</style>
<div id="cookie-notice">
    <span>We would like to use third party cookies and scripts to improve the functionality of this
        website.</span>
    <a id="cookie-notice-accept" class="btn btn-primary btn-sm">Approve</a>
</div>
<script>
    function createCookie(name, value, days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }
    function readCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }
    function eraseCookie(name) {
        createCookie(name, "", -1);
    }

    if (readCookie('cookie-notice-dismissed') == 'true') {
    } else {
        document.getElementById('cookie-notice').style.display = 'block';
    }
    document.getElementById('cookie-notice-accept').addEventListener("click", function () {
        createCookie('cookie-notice-dismissed', 'true', 31);
        document.getElementById('cookie-notice').style.display = 'none';
        location.reload();
    });

</script>

</body>

</html>